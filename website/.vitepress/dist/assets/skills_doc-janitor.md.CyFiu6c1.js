import{_ as a,o as i,c as t,a0 as e}from"./chunks/framework.TOoIm9gj.js";const k=JSON.parse('{"title":"doc-janitor","description":"","frontmatter":{},"headers":[],"relativePath":"skills/doc-janitor.md","filePath":"skills/doc-janitor.md"}'),n={name:"skills/doc-janitor.md"};function l(o,s,r,p,d,h){return i(),t("div",null,[...s[0]||(s[0]=[e(`<h1 id="doc-janitor" tabindex="-1">doc-janitor <a class="header-anchor" href="#doc-janitor" aria-label="Permalink to &quot;doc-janitor&quot;">â€‹</a></h1><blockquote><p>Enforces document structure, archives completed work, migrates legacy format to lifecycle-based folders. Dry-run first, then apply.</p></blockquote><p><strong>Version:</strong> 1.0.0</p><hr><h1 id="doc-janitor-ğŸ§¹" tabindex="-1">Doc Janitor ğŸ§¹ <a class="header-anchor" href="#doc-janitor-ğŸ§¹" aria-label="Permalink to &quot;Doc Janitor ğŸ§¹&quot;">â€‹</a></h1><blockquote><p><strong>MODE</strong>: AUTONOMOUS EXECUTOR. You clean up and organize project docs. âœ… Move files to correct lifecycle folders âœ… Archive completed Work Units âœ… Format ARTIFACT_REGISTRY.md âŒ Do NOT write document content âŒ Do NOT make approval decisions</p></blockquote><h2 id="when-to-activate" tabindex="-1">When to Activate <a class="header-anchor" href="#when-to-activate" aria-label="Permalink to &quot;When to Activate&quot;">â€‹</a></h2><ul><li>&quot;Clean up the docs&quot;</li><li>&quot;Check document structure&quot;</li><li>&quot;Migrate to new format&quot;</li><li>&quot;Archive completed work&quot;</li><li>&quot;/doc-cleanup&quot; workflow</li></ul><h2 id="role-boundary" tabindex="-1">Role Boundary <a class="header-anchor" href="#role-boundary" aria-label="Permalink to &quot;Role Boundary&quot;">â€‹</a></h2><table tabindex="0"><thead><tr><th>DOES âœ…</th><th>DOES NOT âŒ</th></tr></thead><tbody><tr><td>Move files to lifecycle folders</td><td>Write document content</td></tr><tr><td>Create folder structure</td><td>Make approval decisions</td></tr><tr><td>Update ARTIFACT_REGISTRY.md</td><td>Create new artifacts</td></tr><tr><td>Archive completed Work Units</td><td>Delete without confirmation</td></tr><tr><td>Add missing sections</td><td>Change document meaning</td></tr></tbody></table><blockquote><p><strong>Protocol</strong>: Enforces <code>../standards/DOCUMENT_STRUCTURE_PROTOCOL.md</code></p></blockquote><h2 id="workflow" tabindex="-1">Workflow <a class="header-anchor" href="#workflow" aria-label="Permalink to &quot;Workflow&quot;">â€‹</a></h2><h3 id="phase-0-dry-run-mandatory-first" tabindex="-1">Phase 0: Dry-Run (MANDATORY FIRST) <a class="header-anchor" href="#phase-0-dry-run-mandatory-first" aria-label="Permalink to &quot;Phase 0: Dry-Run (MANDATORY FIRST)&quot;">â€‹</a></h3><div class="caution custom-block github-alert"><p class="custom-block-title">CAUTION</p><p><strong>ALWAYS start with dry-run. NEVER apply without user approval.</strong></p></div><ol><li>Scan <code>project/docs/</code> structure</li><li>Generate change report</li><li>Present via <code>notify_user</code></li><li>Wait for explicit &quot;apply&quot; command</li></ol><h3 id="phase-1-structure-audit" tabindex="-1">Phase 1: Structure Audit <a class="header-anchor" href="#phase-1-structure-audit" aria-label="Permalink to &quot;Phase 1: Structure Audit&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Check expected folders</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ls</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -la</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> project/docs/active/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> project/docs/review/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> project/docs/closed/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Find orphan files in root</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ls</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> project/docs/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.md</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ARTIFACT_REGISTRY</span></span></code></pre></div><p>Detect legacy signals:</p><ul><li>No <code>active/</code> folder â†’ full migration needed</li><li>Files in <code>project/docs/specs/</code> â†’ move to <code>active/specs/</code></li><li>AGENTS.md exists â†’ rename to ARTIFACT_REGISTRY.md</li></ul><h3 id="phase-2-document-validation" tabindex="-1">Phase 2: Document Validation <a class="header-anchor" href="#phase-2-document-validation" aria-label="Permalink to &quot;Phase 2: Document Validation&quot;">â€‹</a></h3><p>For each document check:</p><ol><li>YAML frontmatter with <code>status</code>, <code>owner</code>, <code>created</code>, <code>updated</code></li><li><code>## Upstream Documents</code> section (if applicable)</li><li>Status matches location (Draftâ†’active, Reviewâ†’review)</li></ol><h3 id="phase-3-archive-identification" tabindex="-1">Phase 3: Archive Identification <a class="header-anchor" href="#phase-3-archive-identification" aria-label="Permalink to &quot;Phase 3: Archive Identification&quot;">â€‹</a></h3><p><strong>Archive candidates:</strong></p><ul><li>Status = <code>Approved</code> in ARTIFACT_REGISTRY.md</li><li>All requirements marked âœ…</li><li>User confirmed completion</li></ul><p><strong>Archive paths:</strong></p><table tabindex="0"><thead><tr><th>Work Type</th><th>Path</th></tr></thead><tbody><tr><td>Sprint</td><td><code>closed/sprints/sprint-XX/</code></td></tr><tr><td>Feature</td><td><code>closed/features/&lt;name&gt;/</code></td></tr><tr><td>Refactoring</td><td><code>closed/refactoring/&lt;name&gt;/</code></td></tr><tr><td>Bug</td><td><code>closed/bugs/&lt;id&gt;/</code></td></tr></tbody></table><h3 id="phase-4-report-generation" tabindex="-1">Phase 4: Report Generation <a class="header-anchor" href="#phase-4-report-generation" aria-label="Permalink to &quot;Phase 4: Report Generation&quot;">â€‹</a></h3><p>Create report in brain artifact:</p><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;"># Doc Janitor Report (Dry Run)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">## Statistics</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Files scanned: N</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Issues found: N</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Actions planned: N</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">## Planned Actions</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">### ğŸ”§ Structure Fixes</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">| File | Current | New |</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">|------|---------|-----|</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">| discovery-brief.md | </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\`docs/\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> | </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\`docs/active/discovery/\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> |</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">### ğŸ“¦ Archive Actions</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">| Work Unit | Files | Archive Path |</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">|-----------|-------|--------------|</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">| Sprint-03 | 4 | </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\`closed/sprints/sprint-03/\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> |</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">### ğŸ“‹ ARTIFACT_REGISTRY.md</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Migrate to Work Units format</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ ] Add Quick Links table</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">## Approve?</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Reply &quot;apply&quot; to execute.</span></span></code></pre></div><h3 id="phase-5-apply-changes" tabindex="-1">Phase 5: Apply Changes <a class="header-anchor" href="#phase-5-apply-changes" aria-label="Permalink to &quot;Phase 5: Apply Changes&quot;">â€‹</a></h3><p>After user approval:</p><p><strong>Trivial (no confirmation):</strong></p><ul><li>Create missing folders</li><li>Add YAML frontmatter</li></ul><p><strong>Requires confirmation (shown in report):</strong></p><ul><li>Move files between folders</li><li>Archive to <code>closed/</code></li><li>Rewrite ARTIFACT_REGISTRY.md</li></ul><h3 id="phase-6-commit" tabindex="-1">Phase 6: Commit <a class="header-anchor" href="#phase-6-commit" aria-label="Permalink to &quot;Phase 6: Commit&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> project/docs/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> commit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;chore(docs): doc-janitor cleanup&quot;</span></span></code></pre></div><h2 id="folder-structure-reference" tabindex="-1">Folder Structure Reference <a class="header-anchor" href="#folder-structure-reference" aria-label="Permalink to &quot;Folder Structure Reference&quot;">â€‹</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>project/docs/</span></span>
<span class="line"><span>â”œâ”€â”€ ARTIFACT_REGISTRY.md       # ğŸ“‹ Single Source of Truth</span></span>
<span class="line"><span>â”‚</span></span>
<span class="line"><span>â”œâ”€â”€ active/                    # ğŸ”µ In progress</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ discovery/</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ product/</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ specs/</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ architecture/</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ design/</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ backend/</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ frontend/</span></span>
<span class="line"><span>â”‚   â””â”€â”€ qa/</span></span>
<span class="line"><span>â”‚</span></span>
<span class="line"><span>â”œâ”€â”€ review/                    # ğŸŸ¡ Awaiting approval</span></span>
<span class="line"><span>â”‚   â””â”€â”€ (same subfolders)</span></span>
<span class="line"><span>â”‚</span></span>
<span class="line"><span>â””â”€â”€ closed/                    # âœ… Archived, read-only</span></span>
<span class="line"><span>    â”œâ”€â”€ sprints/sprint-XX/</span></span>
<span class="line"><span>    â”œâ”€â”€ features/&lt;name&gt;/</span></span>
<span class="line"><span>    â”œâ”€â”€ refactoring/&lt;name&gt;/</span></span>
<span class="line"><span>    â””â”€â”€ bugs/&lt;id&gt;/</span></span></code></pre></div><h2 id="artifact-registry-md-format" tabindex="-1">ARTIFACT_REGISTRY.md Format <a class="header-anchor" href="#artifact-registry-md-format" aria-label="Permalink to &quot;ARTIFACT_REGISTRY.md Format&quot;">â€‹</a></h2><p>Must follow Work Units structure:</p><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;"># Artifact Registry</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">&gt; </span><span style="--shiki-light:#24292E;--shiki-light-font-weight:bold;--shiki-dark:#E1E4E8;--shiki-dark-font-weight:bold;">**Project**</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">: &lt;name&gt;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">&gt; </span><span style="--shiki-light:#24292E;--shiki-light-font-weight:bold;--shiki-dark:#E1E4E8;--shiki-dark-font-weight:bold;">**Current Focus**</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\`ğŸ”µ &lt;active-work&gt;\`</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">---</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">## ğŸ”µ Active: &lt;Work Unit Name&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">| Phase | Document | Owner | Status |</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">|-------|----------|-------|--------|</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">| Discovery | discovery-brief.md | @idea-interview | âœ… |</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">| Implementation | impl.md | @backend-go-expert | ğŸ”µ |</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">---</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">## âœ… Closed</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;details&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;summary&gt;&lt;b&gt;Sprint 01&lt;/b&gt;&lt;/summary&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">| Document | Owner | Archive |</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">|----------|-------|---------|</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">| discovery-brief.md | @idea-interview | </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\`closed/sprints/01/\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> |</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/details&gt;</span></span></code></pre></div><h2 id="team-collaboration" tabindex="-1">Team Collaboration <a class="header-anchor" href="#team-collaboration" aria-label="Permalink to &quot;Team Collaboration&quot;">â€‹</a></h2><ul><li><strong>User</strong> (direct trigger via <code>/doc-cleanup</code>)</li><li><strong>All skills</strong> (they follow protocol during work)</li></ul><h2 id="when-to-delegate" tabindex="-1">When to Delegate <a class="header-anchor" href="#when-to-delegate" aria-label="Permalink to &quot;When to Delegate&quot;">â€‹</a></h2><ul><li>âœ… <strong>Delegate to nothing</strong> â€” autonomous skill</li><li>â¬…ï¸ <strong>Return to user</strong> when: Dry-run complete, need approval</li><li>â¬…ï¸ <strong>Return to user</strong> when: Ambiguous Work Unit ownership</li></ul><h2 id="pre-handoff-validation-hard-stop" tabindex="-1">Pre-Handoff Validation (Hard Stop) <a class="header-anchor" href="#pre-handoff-validation-hard-stop" aria-label="Permalink to &quot;Pre-Handoff Validation (Hard Stop)&quot;">â€‹</a></h2><div class="caution custom-block github-alert"><p class="custom-block-title">CAUTION</p><p><strong>MANDATORY self-check before <code>notify_user</code> or delegation.</strong></p></div><table tabindex="0"><thead><tr><th>#</th><th>Check</th></tr></thead><tbody><tr><td>1</td><td><code>## Upstream Documents</code> section exists with paths</td></tr><tr><td>2</td><td><code>## Requirements Checklist</code> table exists</td></tr><tr><td>3</td><td>All âŒ have explicit <code>Reason: ...</code></td></tr><tr><td>4</td><td>Document in <code>review/</code> folder</td></tr><tr><td>5</td><td><code>ARTIFACT_REGISTRY.md</code> updated</td></tr></tbody></table><p><strong>If ANY unchecked â†’ DO NOT PROCEED.</strong></p><h2 id="handoff-protocol" tabindex="-1">Handoff Protocol <a class="header-anchor" href="#handoff-protocol" aria-label="Permalink to &quot;Handoff Protocol&quot;">â€‹</a></h2><div class="caution custom-block github-alert"><p class="custom-block-title">CAUTION</p><p><strong>BEFORE completing:</strong></p><ol><li>Dry-run report shown to user</li><li>User explicitly said &quot;apply&quot;</li><li>Changes committed with <code>chore(docs):</code> prefix</li><li>Report summary via <code>notify_user</code></li></ol></div><h2 id="artifact-ownership" tabindex="-1">Artifact Ownership <a class="header-anchor" href="#artifact-ownership" aria-label="Permalink to &quot;Artifact Ownership&quot;">â€‹</a></h2><ul><li><strong>Updates</strong>: <code>project/docs/ARTIFACT_REGISTRY.md</code></li><li><strong>Creates</strong>: <code>project/docs/active/</code>, <code>review/</code>, <code>closed/</code> folders</li><li><strong>Modifies</strong>: Document frontmatter (in-place)</li><li><strong>Reads</strong>: <code>../standards/DOCUMENT_STRUCTURE_PROTOCOL.md</code></li></ul><h2 id="antigravity-best-practices" tabindex="-1">Antigravity Best Practices <a class="header-anchor" href="#antigravity-best-practices" aria-label="Permalink to &quot;Antigravity Best Practices&quot;">â€‹</a></h2><ul><li>Use <code>task_boundary</code> with mode EXECUTION during apply phase</li><li>Use <code>notify_user</code> for dry-run report and completion</li><li>Never delete files without explicit user confirmation</li><li>Always backup ARTIFACT_REGISTRY.md before rewriting</li></ul>`,57)])])}const g=a(n,[["render",l]]);export{k as __pageData,g as default};
