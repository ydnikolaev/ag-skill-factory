import{_ as e,o as s,c as o,a0 as i}from"./chunks/framework.TOoIm9gj.js";const g=JSON.parse('{"title":"mcp-expert","description":"","frontmatter":{},"headers":[],"relativePath":"skills/mcp-expert.md","filePath":"skills/mcp-expert.md"}'),a={name:"skills/mcp-expert.md"};function r(l,t,n,d,c,p){return s(),o("div",null,[...t[0]||(t[0]=[i(`<h1 id="mcp-expert" tabindex="-1">mcp-expert <a class="header-anchor" href="#mcp-expert" aria-label="Permalink to &quot;mcp-expert&quot;">​</a></h1><blockquote><p>Expert on Model Context Protocol (MCP) servers. Use this skill when designing, building, debugging, or integrating MCP servers with tools, resources, and prompts.</p></blockquote><p><strong>Version:</strong> 1.0.0</p><hr><h1 id="mcp-expert-1" tabindex="-1">MCP Expert <a class="header-anchor" href="#mcp-expert-1" aria-label="Permalink to &quot;MCP Expert&quot;">​</a></h1><p>Expert-level guidance for building MCP servers. <strong>Primary language: Go</strong> (official SDK). Also covers Python and TypeScript.</p><h2 id="when-to-use-this-skill" tabindex="-1">When to Use This Skill <a class="header-anchor" href="#when-to-use-this-skill" aria-label="Permalink to &quot;When to Use This Skill&quot;">​</a></h2><ul><li><strong>Trigger</strong>: Create an MCP server or add tools/resources</li><li><strong>Trigger</strong>: Integrate a service via MCP (databases, APIs)</li><li><strong>Trigger</strong>: Debug MCP connection or transport issues</li><li><strong>Anti-pattern</strong>: Do NOT use for general API development without MCP context</li></ul><h2 id="decision-tree" tabindex="-1">Decision Tree <a class="header-anchor" href="#decision-tree" aria-label="Permalink to &quot;Decision Tree&quot;">​</a></h2><ol><li><p><strong>IF</strong> creating a new MCP server:</p><ul><li><strong>Use Go</strong> (primary) — see <code>examples/go-server-official.go</code></li><li>Library: <code>modelcontextprotocol/go-sdk</code> (official, recommended)</li><li>Transport: <code>stdio</code> (IDE) or HTTP (web services)</li></ul></li><li><p><strong>IF</strong> adding to existing Go server:</p><ul><li>Use <code>s.AddTool()</code> with handler function</li><li>Use <code>s.AddResource()</code> for read-only data</li></ul></li><li><p><strong>IF</strong> debugging:</p><ul><li>Check <code>mcp_config.json</code> paths (must be absolute)</li><li>Use Inspector: <code>npx @anthropic/mcp-inspector</code></li><li>Logs go to stderr (stdout reserved for JSON-RPC)</li></ul></li></ol><h2 id="mcp-primitives" tabindex="-1">MCP Primitives <a class="header-anchor" href="#mcp-primitives" aria-label="Permalink to &quot;MCP Primitives&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Primitive</th><th>Purpose</th><th>Example</th></tr></thead><tbody><tr><td><strong>Tool</strong></td><td>Execute actions with side effects</td><td>Run builds, create issues</td></tr><tr><td><strong>Resource</strong></td><td>Expose read-only data</td><td>DB schemas, config files</td></tr><tr><td><strong>Prompt</strong></td><td>Reusable prompt templates</td><td>Code review patterns</td></tr></tbody></table><h2 id="go-quick-reference-official-sdk" tabindex="-1">Go Quick Reference (Official SDK) <a class="header-anchor" href="#go-quick-reference-official-sdk" aria-label="Permalink to &quot;Go Quick Reference (Official SDK)&quot;">​</a></h2><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mcp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">NewServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mcp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Implementation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;my-server&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Version: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;v1.0.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mcp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AddTool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(server, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mcp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Tool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;my_tool&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Description: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Brief description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, HandleMyTool)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">server.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ctx, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mcp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">StdioTransport</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{})</span></span></code></pre></div><p><strong>Full example</strong>: See <code>examples/go-server-official.go</code></p><h2 id="go-libraries" tabindex="-1">Go Libraries <a class="header-anchor" href="#go-libraries" aria-label="Permalink to &quot;Go Libraries&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Library</th><th>Install</th><th>Notes</th></tr></thead><tbody><tr><td><strong>Official SDK</strong></td><td><code>go get github.com/modelcontextprotocol/go-sdk</code></td><td>Recommended, Anthropic-maintained</td></tr><tr><td>mark3labs/mcp-go</td><td><code>go get github.com/mark3labs/mcp-go</code></td><td>Alternative, good DX</td></tr></tbody></table><h2 id="antigravity-config-mcp-config-json" tabindex="-1">Antigravity Config (<code>mcp_config.json</code>) <a class="header-anchor" href="#antigravity-config-mcp-config-json" aria-label="Permalink to &quot;Antigravity Config (\`mcp_config.json\`)&quot;">​</a></h2><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;mcpServers&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;my-server&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;command&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/absolute/path/to/server&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;args&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;env&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;API_KEY&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;your-key&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>Key rules:</strong></p><ol><li><strong>Always use absolute paths</strong></li><li><strong>Logs to stderr</strong> — stdout is for JSON-RPC only</li><li><strong>Descriptions matter</strong> — LLM uses them for tool selection</li></ol><h2 id="debugging-workflow" tabindex="-1">Debugging Workflow <a class="header-anchor" href="#debugging-workflow" aria-label="Permalink to &quot;Debugging Workflow&quot;">​</a></h2><ol><li>Check <code>mcp_config.json</code> paths</li><li>Test standalone: <code>go run server.go</code></li><li>Use Inspector: <code>npx @anthropic/mcp-inspector</code></li><li>Check stderr in terminal</li></ol><h2 id="best-practices" tabindex="-1">Best Practices <a class="header-anchor" href="#best-practices" aria-label="Permalink to &quot;Best Practices&quot;">​</a></h2><h3 id="tool-design" tabindex="-1">Tool Design <a class="header-anchor" href="#tool-design" aria-label="Permalink to &quot;Tool Design&quot;">​</a></h3><ul><li>Use <code>snake_case</code> names: <code>get_user</code>, <code>create_issue</code></li><li>Write rich descriptions</li><li>Validate inputs, return informative errors</li></ul><h3 id="security" tabindex="-1">Security <a class="header-anchor" href="#security" aria-label="Permalink to &quot;Security&quot;">​</a></h3><ul><li>Never log secrets to stdout/stderr</li><li>Use environment variables for API keys</li></ul><h2 id="tdd-protocol-hard-stop" tabindex="-1">TDD Protocol (Hard Stop) <a class="header-anchor" href="#tdd-protocol-hard-stop" aria-label="Permalink to &quot;TDD Protocol (Hard Stop)&quot;">​</a></h2><div class="caution custom-block github-alert"><p class="custom-block-title">CAUTION</p><p><strong>NO CODE WITHOUT FAILING TEST.</strong></p><ul><li><strong>Tools</strong>: Write a test that calls the tool with mock input -&gt; Assert output.</li><li><strong>Resources</strong>: Write a test that reads the resource URI -&gt; Assert content.</li></ul><p><strong>Agents MUST refuse to write implementation code if this loop is skipped.</strong></p></div><h2 id="tech-debt-protocol-hard-stop" tabindex="-1">Tech Debt Protocol (Hard Stop) <a class="header-anchor" href="#tech-debt-protocol-hard-stop" aria-label="Permalink to &quot;Tech Debt Protocol (Hard Stop)&quot;">​</a></h2><div class="caution custom-block github-alert"><p class="custom-block-title">CAUTION</p><p><strong>Follow <code>../standards/TECH_DEBT_PROTOCOL.md</code>.</strong> When creating workarounds:</p><ol><li>Add <code>// TODO(TD-XXX): description</code> in code</li><li>Register in <code>project/docs/TECH_DEBT.md</code></li></ol><p><strong>Forbidden:</strong> Untracked TODOs, undocumented hardcoded values.</p></div><h2 id="git-protocol-hard-stop" tabindex="-1">Git Protocol (Hard Stop) <a class="header-anchor" href="#git-protocol-hard-stop" aria-label="Permalink to &quot;Git Protocol (Hard Stop)&quot;">​</a></h2><div class="caution custom-block github-alert"><p class="custom-block-title">CAUTION</p><p><strong>Follow <code>../standards/GIT_PROTOCOL.md</code>.</strong></p><ol><li><strong>Branch</strong>: Work in <code>feat/&lt;name&gt;</code> or <code>fix/&lt;name&gt;</code>.</li><li><strong>Commit</strong>: Use Conventional Commits (<code>feat:</code>, <code>fix:</code>).</li><li><strong>Atomic</strong>: One commit = One logical change.</li></ol><p><strong>Reject</strong>: &quot;wip&quot;, &quot;update&quot;, &quot;fix&quot; as commit messages.</p></div><h2 id="team-collaboration" tabindex="-1">Team Collaboration <a class="header-anchor" href="#team-collaboration" aria-label="Permalink to &quot;Team Collaboration&quot;">​</a></h2><ul><li><strong>Backend</strong>: <code>@backend-go-expert</code> (Integrates MCP into Go services)</li><li><strong>DevOps</strong>: <code>@devops-sre</code> (MCP server deployment, systemd units)</li><li><strong>CLI</strong>: <code>@cli-architect</code> (MCP tools for CLI applications)</li><li><strong>TMA</strong>: <code>@tma-expert</code> (MCP integration with Telegram Mini Apps)</li></ul><h2 id="when-to-delegate" tabindex="-1">When to Delegate <a class="header-anchor" href="#when-to-delegate" aria-label="Permalink to &quot;When to Delegate&quot;">​</a></h2><ul><li><p>✅ <strong>Delegate to <code>@backend-go-expert</code></strong> when: MCP server needs integration into larger Go service</p></li><li><p>✅ <strong>Delegate to <code>@devops-sre</code></strong> when: MCP server ready for deployment</p></li><li><p>⬅️ <strong>Return to <code>@systems-analyst</code></strong> if: Requirements unclear for tool design</p></li></ul><h2 id="iteration-protocol-ephemeral-→-persistent" tabindex="-1">Iteration Protocol (Ephemeral → Persistent) <a class="header-anchor" href="#iteration-protocol-ephemeral-→-persistent" aria-label="Permalink to &quot;Iteration Protocol (Ephemeral → Persistent)&quot;">​</a></h2><div class="important custom-block github-alert"><p class="custom-block-title">IMPORTANT</p><p><strong>Phase 1: Draft in Brain</strong> — Create MCP Server Config as artifact. Iterate via <code>notify_user</code>. <strong>Phase 2: Persist on Approval</strong> — ONLY after &quot;Looks good&quot; → write to <code>project/docs/mcp/</code></p></div><h2 id="artifact-ownership" tabindex="-1">Artifact Ownership <a class="header-anchor" href="#artifact-ownership" aria-label="Permalink to &quot;Artifact Ownership&quot;">​</a></h2><ul><li><strong>Creates</strong>: <code>project/docs/mcp/server-config.md</code></li><li><strong>Reads</strong>: <code>project/docs/architecture/api-contracts.yaml</code></li><li><strong>Updates</strong>: <code>project/docs/ARTIFACT_REGISTRY.md</code> (status + timestamp)</li></ul><h2 id="pre-handoff-validation-hard-stop" tabindex="-1">Pre-Handoff Validation (Hard Stop) <a class="header-anchor" href="#pre-handoff-validation-hard-stop" aria-label="Permalink to &quot;Pre-Handoff Validation (Hard Stop)&quot;">​</a></h2><div class="caution custom-block github-alert"><p class="custom-block-title">CAUTION</p><p><strong>MANDATORY self-check before <code>notify_user</code> or delegation.</strong></p></div><table tabindex="0"><thead><tr><th>#</th><th>Check</th></tr></thead><tbody><tr><td>1</td><td><code>## Upstream Documents</code> section exists with paths</td></tr><tr><td>2</td><td><code>## Requirements Checklist</code> table exists</td></tr><tr><td>3</td><td>All ❌ have explicit <code>Reason: ...</code></td></tr><tr><td>4</td><td>Document in <code>review/</code> folder</td></tr><tr><td>5</td><td><code>ARTIFACT_REGISTRY.md</code> updated</td></tr></tbody></table><p><strong>If ANY unchecked → DO NOT PROCEED.</strong></p><h2 id="handoff-protocol" tabindex="-1">Handoff Protocol <a class="header-anchor" href="#handoff-protocol" aria-label="Permalink to &quot;Handoff Protocol&quot;">​</a></h2><div class="caution custom-block github-alert"><p class="custom-block-title">CAUTION</p><p><strong>BEFORE handoff:</strong></p><ol><li>Save final document to <code>project/docs/</code> path</li><li>Change file status from <code>Draft</code> to <code>Approved</code> in header/frontmatter</li><li>Update <code>project/docs/ARTIFACT_REGISTRY.md</code> status to ✅ Done</li><li>Use <code>notify_user</code> for final approval</li><li>THEN delegate to next skill</li></ol></div><h2 id="examples" tabindex="-1">Examples <a class="header-anchor" href="#examples" aria-label="Permalink to &quot;Examples&quot;">​</a></h2><table tabindex="0"><thead><tr><th>File</th><th>Description</th></tr></thead><tbody><tr><td><code>examples/go-server-official.go</code></td><td>Go server (official SDK) — recommended</td></tr><tr><td><code>examples/go-server-mcp-go.go</code></td><td>Go server (mark3labs/mcp-go) — alternative</td></tr><tr><td><code>examples/python-server.py</code></td><td>Python server (FastMCP)</td></tr><tr><td><code>examples/typescript-server.ts</code></td><td>TypeScript server</td></tr><tr><td><code>examples/mcp_config.json</code></td><td>Antigravity config</td></tr></tbody></table><h2 id="resources" tabindex="-1">Resources <a class="header-anchor" href="#resources" aria-label="Permalink to &quot;Resources&quot;">​</a></h2><ul><li><strong>Docs</strong>: <a href="https://modelcontextprotocol.io" target="_blank" rel="noreferrer">modelcontextprotocol.io</a></li><li><strong>Go (mcp-go)</strong>: <a href="https://github.com/mark3labs/mcp-go" target="_blank" rel="noreferrer">github.com/mark3labs/mcp-go</a></li><li><strong>Go (official)</strong>: <a href="https://github.com/modelcontextprotocol/go-sdk" target="_blank" rel="noreferrer">github.com/modelcontextprotocol/go-sdk</a></li><li><strong>Inspector</strong>: <code>npx @anthropic/mcp-inspector</code></li></ul><div class="important custom-block github-alert"><p class="custom-block-title">IMPORTANT</p><p></p><h2 id="first-step-read-project-config-mcp" tabindex="-1">First Step: Read Project Config &amp; MCP <a class="header-anchor" href="#first-step-read-project-config-mcp" aria-label="Permalink to &quot;First Step: Read Project Config &amp; MCP&quot;">​</a></h2><p>Before making technical decisions, <strong>always check</strong>:</p><table tabindex="0"><thead><tr><th>File</th><th>Purpose</th></tr></thead><tbody><tr><td><code>project/CONFIG.yaml</code></td><td>Stack versions, modules, architecture</td></tr><tr><td><code>mcp.yaml</code></td><td>Project MCP server config</td></tr><tr><td><code>mcp/</code></td><td>Project-specific MCP tools/resources</td></tr></tbody></table><p><strong>Use project MCP server</strong> (named after project, e.g. <code>mcp_&lt;project-name&gt;_*</code>):</p><ul><li><code>list_resources</code> → see available project data</li><li><code>*_tools</code> → project-specific actions (db, cache, jobs, etc.)</li></ul><p><strong>Use <code>mcp_context7</code></strong> for library docs:</p><ul><li>Check <code>mcp.yaml → context7.default_libraries</code> for pre-configured libs</li><li>Example: <code>libraryId: /nuxt/nuxt</code>, query: &quot;Nuxt 4 composables&quot;</li></ul></div>`,53)])])}const k=e(a,[["render",r]]);export{g as __pageData,k as default};
